import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,o as a,d as l}from"./app-DT7svUeb.js";const n={},i=l(`<p>记录一些常用的linux shell命令, 做个备忘</p><h2 id="抓取命令-grep" tabindex="-1"><a class="header-anchor" href="#抓取命令-grep"><span>抓取命令 <em>grep</em></span></a></h2><p>命令形式: <code>grep [-acinv] [--color[=auto]] &quot;搜寻内容&quot; filename</code>, 其中搜索串可以是正则表达式</p><p>常用参数:</p><ul><li>-a: 将 binary 文件以 text 文件的方式搜寻数据</li><li>-c: 计算找到 &#39;搜寻内容&#39; 的次数</li><li>-i: 忽略大小写的不同</li><li>-n: 顺便输出行号</li><li>-v: 反向选择，亦即显示出没有&quot;搜寻内容&quot;内容的那一行, 配合管道使用很方便</li><li>-A: 多显示后面的num行</li><li>-B: 多显示前面的num行</li><li>-C: 多显示前面和后面的num行, 相当于AB合起来</li></ul><p>常用示例:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#B392F0;">向前显示5行:</span><span style="color:#9ECBFF;"> grep</span><span style="color:#9ECBFF;"> &quot;2016-6-23 12:00:00&quot;</span><span style="color:#79B8FF;"> -B5</span><span style="color:#79B8FF;"> --color</span><span style="color:#9ECBFF;"> access.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="抓取时间大于某个值" tabindex="-1"><a class="header-anchor" href="#抓取时间大于某个值"><span>抓取时间大于某个值</span></a></h3><p>配合<code>sed</code>命令和<code>awk</code>命令</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span>$ grep &quot;运行时间为&quot; qcredit.log  | sed &#39;s/ms//&#39; | awk -F &#39;:&#39; &#39;{if($5&gt;100) print}&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>通过<code>sed</code>命令把字符串里的<code>ms</code>换成空串, <code>awk</code>命令 <code>-F &#39;:&#39;</code> 表示用<code>:</code>对文本分割, <code>$5</code>对应分割后的时间那一列</p><h2 id="awk" tabindex="-1"><a class="header-anchor" href="#awk"><span>awk</span></a></h2><ul><li>使用方式:<code>awk [-F 分隔符] &#39;commands&#39; filename</code>, 其中<code>-F</code>可选, 不写默认以<code>空格</code>或<code>制表符</code>分割</li></ul><p>内置变量(具体参考<code>man</code>手册):</p><ul><li>FS : 域分隔符, 即-F选项指定的分隔符</li><li>RS : 记录分隔符</li><li>NF : 当前记录域的个数</li><li>NR : 已读的记录数</li><li>FNR : 当前行在文件中的行号</li></ul><p>常用示例:</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#6A737D;"># 以 : 分割, 打印第7列($0表示整行)</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#9ECBFF;"> /etc/passwd</span><span style="color:#F97583;"> |</span><span style="color:#B392F0;"> awk</span><span style="color:#79B8FF;">  -F</span><span style="color:#9ECBFF;"> &#39;:&#39;</span><span style="color:#9ECBFF;">  &#39;{print $7}&#39;</span></span>
<span class="line"><span style="color:#6A737D;"># 打印列数超过10列的行</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#9ECBFF;"> &#39;{if(NF&gt;10) print $0}&#39;</span></span>
<span class="line"><span style="color:#6A737D;"># 在开头和结尾打印一些东西</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#9ECBFF;"> /etc/passwd</span><span style="color:#F97583;"> |</span><span style="color:#B392F0;"> awk</span><span style="color:#79B8FF;">  -F</span><span style="color:#9ECBFF;"> &#39;:&#39;</span><span style="color:#9ECBFF;">  &#39;BEGIN {print &quot;name,shell&quot;}  {print $1&quot;,&quot;$7} END {print &quot;aaa,bbb&quot;}&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="去重排序" tabindex="-1"><a class="header-anchor" href="#去重排序"><span>去重排序</span></a></h2><p>组合使用<code>sort</code>和<code>uniq</code>, 如:<code>sort test.txt | uniq -c | sort -rn</code></p><p>其中:</p><ul><li><code>uniq</code>命令只能对相邻行进行去重复操作,所以在进行去重前,先要对文本行进行排序,使重复行集中到一起: <code>sort test.txt</code></li><li>去掉相邻的重复行: <code>sort test.txt | uniq</code></li><li><code>uniq -c</code>可以实现对重复次数进行统计, 文本行去重并按重复次数排序: <code>sort test.txt | uniq -c</code></li><li><code>sort -n</code>可以识别每行开头的数字，并按其大小对文本行进行排序。默认是按升序排列，如果想要按降序要加<code>-r</code>选项(<code>sort -rn</code>)</li></ul><h2 id="链接命令-ln" tabindex="-1"><a class="header-anchor" href="#链接命令-ln"><span>链接命令 <em>ln</em></span></a></h2><ul><li>软链接: 可链接目录、可跨文件系统、相当于快捷方式</li><li>硬链接: 文件副本、不占空间、不可链接目录、不可跨文件系统</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span>软链接: ln -s src_name link_name</span></span>
<span class="line"><span>硬链接: ln file_name link_name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="打包命令-tar" tabindex="-1"><a class="header-anchor" href="#打包命令-tar"><span>打包命令 <em>tar</em></span></a></h2><p>常用参数:</p><ul><li>-c: 创建</li><li>-x: 解压</li><li>-f: 指定文件</li><li>-v: 显示进度</li><li>-t: 显示列表</li><li>-z: 使用gzip压缩</li><li>-j: 使用bzip2压缩</li></ul><p>常用示例:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span>打包: tar -cvf output.tar inpt1 input2 ...</span></span>
<span class="line"><span>压缩: tar -zcvf output.tar directory/input</span></span>
<span class="line"><span>解压: tar -xvf input.tar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="远程拷贝-scp" tabindex="-1"><a class="header-anchor" href="#远程拷贝-scp"><span>远程拷贝 <em>scp</em></span></a></h2><p>常用参数:</p><ul><li>-r: 递归拷贝，若文件夹下有文件，则底下文件也一起拷贝</li></ul><p>常用示例:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span>上传: scp -r local_file username@remote_ip:remote_file</span></span>
<span class="line"><span>下载: scp -r username@ip:remote_file local_file</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="修改权限-chmod" tabindex="-1"><a class="header-anchor" href="#修改权限-chmod"><span>修改权限 <em>chmod</em></span></a></h2><p>递归修改权限，比如，将某目录下面的所有文件修改为644，所有目录修改为755</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span>find ./mydir -type f | xargs chmod 644</span></span>
<span class="line"><span>find ./mydir -type d | xargs chmod 755</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查看端口占用情况" tabindex="-1"><a class="header-anchor" href="#查看端口占用情况"><span>查看端口占用情况</span></a></h2><p>不用<code>sudo</code>看不到<code>PID/Program name</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span>sudo netstat -tunlp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="查看磁盘空间" tabindex="-1"><a class="header-anchor" href="#查看磁盘空间"><span>查看磁盘空间</span></a></h2><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#6A737D;"># 查看硬盘剩余空间</span></span>
<span class="line"><span style="color:#B392F0;">df</span><span style="color:#79B8FF;"> -h</span></span>
<span class="line"><span style="color:#6A737D;"># 查看目录占用空间</span></span>
<span class="line"><span style="color:#B392F0;">du</span><span style="color:#79B8FF;"> -hs</span><span style="color:#9ECBFF;"> dir</span></span>
<span class="line"><span style="color:#6A737D;"># 列出一级目录所占空间</span></span>
<span class="line"><span style="color:#B392F0;">du</span><span style="color:#79B8FF;"> -ah</span><span style="color:#79B8FF;"> --max-depth=1</span><span style="color:#9ECBFF;"> dir</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,42),t=[i];function o(r,c){return a(),s("div",null,t)}const u=e(n,[["render",o],["__file","2015-12-15-linux命令积累.html.vue"]]),h=JSON.parse(`{"path":"/program/ops/linux/2015-12-15-linux%E5%91%BD%E4%BB%A4%E7%A7%AF%E7%B4%AF.html","title":"Linux命令积累","lang":"zh-CN","frontmatter":{"title":"Linux命令积累","date":"2015-12-15T00:00:00.000Z","category":"Linux","tag":["Linux"],"order":-20151215,"description":"记录一些常用的linux shell命令, 做个备忘 抓取命令 grep 命令形式: grep [-acinv] [--color[=auto]] \\"搜寻内容\\" filename, 其中搜索串可以是正则表达式 常用参数: -a: 将 binary 文件以 text 文件的方式搜寻数据 -c: 计算找到 '搜寻内容' 的次数 -i: 忽略大小写的不同 -...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/program/ops/linux/2015-12-15-linux%E5%91%BD%E4%BB%A4%E7%A7%AF%E7%B4%AF.html"}],["meta",{"property":"og:site_name","content":"魔芋丝丝"}],["meta",{"property":"og:title","content":"Linux命令积累"}],["meta",{"property":"og:description","content":"记录一些常用的linux shell命令, 做个备忘 抓取命令 grep 命令形式: grep [-acinv] [--color[=auto]] \\"搜寻内容\\" filename, 其中搜索串可以是正则表达式 常用参数: -a: 将 binary 文件以 text 文件的方式搜寻数据 -c: 计算找到 '搜寻内容' 的次数 -i: 忽略大小写的不同 -..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-23T15:13:58.000Z"}],["meta",{"property":"article:author","content":"moyusisi"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:published_time","content":"2015-12-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-23T15:13:58.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Linux命令积累\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2015-12-15T00:00:00.000Z\\",\\"dateModified\\":\\"2024-06-23T15:13:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"moyusisi\\"}]}"]]},"headers":[{"level":2,"title":"抓取命令 grep","slug":"抓取命令-grep","link":"#抓取命令-grep","children":[{"level":3,"title":"抓取时间大于某个值","slug":"抓取时间大于某个值","link":"#抓取时间大于某个值","children":[]}]},{"level":2,"title":"awk","slug":"awk","link":"#awk","children":[]},{"level":2,"title":"去重排序","slug":"去重排序","link":"#去重排序","children":[]},{"level":2,"title":"链接命令 ln","slug":"链接命令-ln","link":"#链接命令-ln","children":[]},{"level":2,"title":"打包命令 tar","slug":"打包命令-tar","link":"#打包命令-tar","children":[]},{"level":2,"title":"远程拷贝 scp","slug":"远程拷贝-scp","link":"#远程拷贝-scp","children":[]},{"level":2,"title":"修改权限 chmod","slug":"修改权限-chmod","link":"#修改权限-chmod","children":[]},{"level":2,"title":"查看端口占用情况","slug":"查看端口占用情况","link":"#查看端口占用情况","children":[]},{"level":2,"title":"查看磁盘空间","slug":"查看磁盘空间","link":"#查看磁盘空间","children":[]}],"git":{"createdTime":1719155638000,"updatedTime":1719155638000,"contributors":[{"name":"moyusisi","email":"moyusisi@126.com","commits":1}]},"filePathRelative":"program/ops/linux/2015-12-15-linux命令积累.md","localizedDate":"2015年12月15日","excerpt":"","autoDesc":true}`);export{u as comp,h as data};
