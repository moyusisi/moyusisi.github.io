<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.50" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/program/code/2016-02-24-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%BC%95%E6%93%8Eaviator.html"><meta property="og:site_name" content="魔芋丝丝"><meta property="og:title" content="表达式引擎aviator"><meta property="og:description" content="Aviator是一个轻量级、高性能的Java表达式执行引擎, 本文内容主要来自于官方文档 简介 Aviator是一个高性能、轻量级的 java 语言实现的表达式求值引擎, 主要用于各种表达式的动态求值。现在已经有很多开源可用的 java 表达式求值引擎,为什么还需要 Avaitor 呢? Aviator的设计目标是轻量级和高性能,相比于Groovy、J..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-08-16T03:30:34.000Z"><meta property="article:author" content="moyusisi"><meta property="article:tag" content="Aviator"><meta property="article:published_time" content="2016-02-24T00:00:00.000Z"><meta property="article:modified_time" content="2024-08-16T03:30:34.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"表达式引擎aviator","image":[""],"datePublished":"2016-02-24T00:00:00.000Z","dateModified":"2024-08-16T03:30:34.000Z","author":[{"@type":"Person","name":"moyusisi"}]}</script><title>表达式引擎aviator | 魔芋丝丝</title><meta name="description" content="Aviator是一个轻量级、高性能的Java表达式执行引擎, 本文内容主要来自于官方文档 简介 Aviator是一个高性能、轻量级的 java 语言实现的表达式求值引擎, 主要用于各种表达式的动态求值。现在已经有很多开源可用的 java 表达式求值引擎,为什么还需要 Avaitor 呢? Aviator的设计目标是轻量级和高性能,相比于Groovy、J...">
    <link rel="preload" href="/assets/style-Bfoqeg_E.css" as="style"><link rel="stylesheet" href="/assets/style-Bfoqeg_E.css">
    <link rel="modulepreload" href="/assets/app-BZq5veQF.js"><link rel="modulepreload" href="/assets/2016-02-24-表达式引擎aviator.html-94nWBepH.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-BFV_7Ki3.js" as="script"><link rel="prefetch" href="/assets/portfolio.html-BSIS7ERY.js" as="script"><link rel="prefetch" href="/assets/project.html-BJ5ufALg.js" as="script"><link rel="prefetch" href="/assets/2017-05-14-查找算法.html-DJ9yhk6X.js" as="script"><link rel="prefetch" href="/assets/2017-05-18-排序算法.html-D4sZs63-.js" as="script"><link rel="prefetch" href="/assets/2017-06-20-数据结构中常见的树.html-spCOQ2nv.js" as="script"><link rel="prefetch" href="/assets/2016-05-25-各种还款方式详解.html-DaIb3RxS.js" as="script"><link rel="prefetch" href="/assets/2024-06-20-五险一金详解.html-5xAAjhoa.js" as="script"><link rel="prefetch" href="/assets/2024-06-25-个人所得税.html-B78kBXR_.js" as="script"><link rel="prefetch" href="/assets/2024-06-30-医保报销详解.html-DJvQpI_m.js" as="script"><link rel="prefetch" href="/assets/index.html-C-X-nxMJ.js" as="script"><link rel="prefetch" href="/assets/0001.两数之和.html-CPWqNtKh.js" as="script"><link rel="prefetch" href="/assets/322.零钱兑换.html-BKIpVxLA.js" as="script"><link rel="prefetch" href="/assets/518.零钱兑换 II.html-Cvj6gr3W.js" as="script"><link rel="prefetch" href="/assets/index.html-Ba00l-Et.js" as="script"><link rel="prefetch" href="/assets/index.html-C-aVFRM9.js" as="script"><link rel="prefetch" href="/assets/2015-01-05-java中的并发.html-CXIDgxuD.js" as="script"><link rel="prefetch" href="/assets/2015-01-18-MyBatis(一)入门.html-Bl27MjXM.js" as="script"><link rel="prefetch" href="/assets/2015-01-20-MyBatis(二)配置文件.html-QoNsAaXk.js" as="script"><link rel="prefetch" href="/assets/2015-01-22-MyBatis(三)Mapper.xml映射文件.html-BAq6LLbz.js" as="script"><link rel="prefetch" href="/assets/2015-01-24-MyBatis(四)动态SQL.html-DSPMLB9Q.js" as="script"><link rel="prefetch" href="/assets/2015-01-26-Spring(一)入门.html-DqtwfKg9.js" as="script"><link rel="prefetch" href="/assets/2015-01-28-Spring(二)基本用法.html-CaBwGV1K.js" as="script"><link rel="prefetch" href="/assets/2015-01-29-Spring(三)注解.html-DrINGBsy.js" as="script"><link rel="prefetch" href="/assets/2015-02-02-Spring(四)Spring整合MyBatis.html-BEwLSmKS.js" as="script"><link rel="prefetch" href="/assets/2015-02-05-Spring(五)SpringMVC的简单使用.html-DYLwV3Yf.js" as="script"><link rel="prefetch" href="/assets/2015-02-14-Java中的异常.html-gC7wtQa8.js" as="script"><link rel="prefetch" href="/assets/2015-02-16-java基础整理.html-DYXC5VXo.js" as="script"><link rel="prefetch" href="/assets/2015-02-21-java类加载器.html-BjbdplVM.js" as="script"><link rel="prefetch" href="/assets/2015-04-27-java注解(Annotation).html-DDQ-l_RO.js" as="script"><link rel="prefetch" href="/assets/2015-05-18-java日志(一)日志组件的简介及使用.html-BCejZoXU.js" as="script"><link rel="prefetch" href="/assets/2015-06-04-java日志(二)JUL源码分析.html-B4pKCLex.js" as="script"><link rel="prefetch" href="/assets/2015-06-11-java对象的内存大小.html-Cu4fEmIu.js" as="script"><link rel="prefetch" href="/assets/2015-06-24-CSRF.html-BSKeQPxF.js" as="script"><link rel="prefetch" href="/assets/2015-07-03-java日志(三)logback配置文件.html-BF1O90fp.js" as="script"><link rel="prefetch" href="/assets/2015-08-27-Json对象的格式.html-CSOaCMAk.js" as="script"><link rel="prefetch" href="/assets/2015-10-20-javaWeb项目的请求路径.html-mT8a3UMJ.js" as="script"><link rel="prefetch" href="/assets/2015-10-22-CSS选择器.html-CuHSFEgW.js" as="script"><link rel="prefetch" href="/assets/2015-10-24-正则表达式.html-DXE-cz7c.js" as="script"><link rel="prefetch" href="/assets/2015-11-10-Guava之Objects.html-HOm8tToi.js" as="script"><link rel="prefetch" href="/assets/2015-11-11-Guava之Optional.html-2VdNBPt-.js" as="script"><link rel="prefetch" href="/assets/2015-11-11-Guava之Preconditions.html-BF59Fw7o.js" as="script"><link rel="prefetch" href="/assets/2015-11-12-Collection中的方法.html-D58ZwWXn.js" as="script"><link rel="prefetch" href="/assets/2015-11-12-Collection的toArray方法.html-DsG8ukbU.js" as="script"><link rel="prefetch" href="/assets/2015-11-12-Map中的方法.html-C6aCyvoT.js" as="script"><link rel="prefetch" href="/assets/2015-11-13-Collections工具类.html-NOIij60Y.js" as="script"><link rel="prefetch" href="/assets/2015-11-16-Guava之Ordering.html-CbKIRm44.js" as="script"><link rel="prefetch" href="/assets/2015-11-18-Guava新集合类型.html-CRjeCtqT.js" as="script"><link rel="prefetch" href="/assets/2015-11-19-Guava之Joiner.html-COBPNfpZ.js" as="script"><link rel="prefetch" href="/assets/2015-11-20-Guava之Splitter.html-DdmNqdYe.js" as="script"><link rel="prefetch" href="/assets/2015-11-21-Guava之CharMatcher.html-D8UG8Zr8.js" as="script"><link rel="prefetch" href="/assets/2015-11-23-Guava不可变集合.html-ymBkEUT8.js" as="script"><link rel="prefetch" href="/assets/2015-11-26-Spring的AOP.html-uv5NhPxo.js" as="script"><link rel="prefetch" href="/assets/2015-12-25-SpringMVC之Controller控制器.html-C3qCSyNs.js" as="script"><link rel="prefetch" href="/assets/2016-01-14-java中的反射.html-QrRhvFZY.js" as="script"><link rel="prefetch" href="/assets/2016-01-29-Hadoop项目框架.html-CufySLpt.js" as="script"><link rel="prefetch" href="/assets/2016-02-16-Type详解.html-CncVajBs.js" as="script"><link rel="prefetch" href="/assets/2016-02-25-Class类简介.html-C2CU7QKb.js" as="script"><link rel="prefetch" href="/assets/2016-03-01-java中的并发(二).html-DWHt9EAN.js" as="script"><link rel="prefetch" href="/assets/2016-03-04-java中的弱引用.html-C2wT41u0.js" as="script"><link rel="prefetch" href="/assets/2016-03-25-一致性哈希.html-BKXK_WRC.js" as="script"><link rel="prefetch" href="/assets/2016-04-11-SpringMVC解决GET参数乱码.html-kn9gzg42.js" as="script"><link rel="prefetch" href="/assets/2016-04-12-HBase Shell命令总结.html-qCa6OIWf.js" as="script"><link rel="prefetch" href="/assets/2016-06-01-AOP中获取方法上的注解信息.html-EvXVdYYQ.js" as="script"><link rel="prefetch" href="/assets/2016-06-20-Java线程状态.html-CC-MVXXH.js" as="script"><link rel="prefetch" href="/assets/2016-06-25-十分钟了解BIO、NIO、AIO.html-D821rQR6.js" as="script"><link rel="prefetch" href="/assets/2016-06-29-Java日期处理工具JodaTime.html-C4P9JlRn.js" as="script"><link rel="prefetch" href="/assets/2016-08-08-Spring的EL表达式.html-DTAiy747.js" as="script"><link rel="prefetch" href="/assets/2016-08-12-Drools语法详解.html-tUPn14zJ.js" as="script"><link rel="prefetch" href="/assets/2016-08-14-Drools简单使用示例.html-BJqMb-RH.js" as="script"><link rel="prefetch" href="/assets/2016-08-31-动态代理.html-CTVveCOQ.js" as="script"><link rel="prefetch" href="/assets/2016-10-30-使用SpringBoot快速构建应用.html-C7IL143S.js" as="script"><link rel="prefetch" href="/assets/2016-11-02-SpringBoot中的配置.html-D36F5Mc3.js" as="script"><link rel="prefetch" href="/assets/2016-11-03-SpringBoot中的日志.html-DG6wigmf.js" as="script"><link rel="prefetch" href="/assets/2016-11-06-SpringBoot集成MyBatis.html-B04z-XCL.js" as="script"><link rel="prefetch" href="/assets/2016-11-09-关于单元测试.html-B8m7oisD.js" as="script"><link rel="prefetch" href="/assets/2016-11-16-Servlet详解.html-G1RkFF3R.js" as="script"><link rel="prefetch" href="/assets/2016-11-17-SpringBoot与HttpMessageConverter.html-CKmou45y.js" as="script"><link rel="prefetch" href="/assets/2016-11-18-SpringBoot与HandlerInterceptor.html-DRwU6q0g.js" as="script"><link rel="prefetch" href="/assets/2016-11-19-SpringBoot与Servlet组件.html-VFursT-e.js" as="script"><link rel="prefetch" href="/assets/2016-11-21-SpringBoot在外部tomcat的部署.html-CuYq6LGC.js" as="script"><link rel="prefetch" href="/assets/2016-11-22-Spring的扩展点.html-BpRVIUs-.js" as="script"><link rel="prefetch" href="/assets/2016-12-12-SpringBoot多数据源配置.html-DwhgjMky.js" as="script"><link rel="prefetch" href="/assets/2017-03-03-事务的隔离级别.html-DmzmkzTZ.js" as="script"><link rel="prefetch" href="/assets/2017-03-08-HashMap详解.html-7b28-xuO.js" as="script"><link rel="prefetch" href="/assets/2017-04-06-String补充.html-DylHcKvg.js" as="script"><link rel="prefetch" href="/assets/2017-04-11-ES学习之全文检索原理.html-CMpLsrX4.js" as="script"><link rel="prefetch" href="/assets/2017-05-03-Java中的并发之Future模式.html-DXEtdi-a.js" as="script"><link rel="prefetch" href="/assets/2017-05-22-ConcurrentHashMap详解.html-CuG-XE1e.js" as="script"><link rel="prefetch" href="/assets/2017-08-14-Spring Bean的生命周期.html-DLyj7NIB.js" as="script"><link rel="prefetch" href="/assets/2017-09-30-Spring中的XML配置的写法.html-DybOGthG.js" as="script"><link rel="prefetch" href="/assets/2017-11-08-MD5与SHA-1简介.html-Z2mXabJw.js" as="script"><link rel="prefetch" href="/assets/2017-11-11-Base64与URLEncode简介.html-ClJQ83gn.js" as="script"><link rel="prefetch" href="/assets/2017-11-29-IPv4详解.html-CoZt4hIx.js" as="script"><link rel="prefetch" href="/assets/2017-12-03-ARP详解.html-B7_dsmlS.js" as="script"><link rel="prefetch" href="/assets/2017-12-30-设计模式一.html-CuPXZP7R.js" as="script"><link rel="prefetch" href="/assets/2018-09-11-SpringMVC实体对象绑定参数时自定义对应关系.html-czhqYwkp.js" as="script"><link rel="prefetch" href="/assets/2018-09-13-JDK8的Lambda表达式.html-CrERBBBc.js" as="script"><link rel="prefetch" href="/assets/2015-01-16-MySQL数据类型.html-DF04qQcH.js" as="script"><link rel="prefetch" href="/assets/2015-06-17-MySQL加锁.html-BAXgMhrX.js" as="script"><link rel="prefetch" href="/assets/2016-06-16-MySQL常用命令.html-COyehS1s.js" as="script"><link rel="prefetch" href="/assets/2018-06-26-MySQL中的连接查询.html-CZak4JBn.js" as="script"><link rel="prefetch" href="/assets/2018-09-10-MySQL常用功能积累.html-CbBtlBWX.js" as="script"><link rel="prefetch" href="/assets/2015-05-05-Vim常用快捷键.html-BrBK_SS0.js" as="script"><link rel="prefetch" href="/assets/2015-05-12-git常用命令.html-DRkP14r4.js" as="script"><link rel="prefetch" href="/assets/2015-12-15-linux命令积累.html-tZpuElXv.js" as="script"><link rel="prefetch" href="/assets/2024-07-06-Docker常用命令.html-BzC4HbGe.js" as="script"><link rel="prefetch" href="/assets/2024-07-07-Dockerfile构建镜像.html-CbXPWEfO.js" as="script"><link rel="prefetch" href="/assets/2024-08-27-Nginx配置详解.html-usMBFqc2.js" as="script"><link rel="prefetch" href="/assets/2015-02-15-Idea快捷键forMac.html-Cavg9oIH.js" as="script"><link rel="prefetch" href="/assets/2015-05-04-MacOS快捷键.html-CH7TTifu.js" as="script"><link rel="prefetch" href="/assets/2024-07-02-Homebrew常用命令.html-BTnvWhlI.js" as="script"><link rel="prefetch" href="/assets/2024-07-14-MacOS下JDK相关路径.html-DzyDl56p.js" as="script"><link rel="prefetch" href="/assets/2024-07-01-Tex公式常见符号.html-B-AWl2mw.js" as="script"><link rel="prefetch" href="/assets/404.html-Bsx9wJ9V.js" as="script"><link rel="prefetch" href="/assets/index.html-R2Zt3QaO.js" as="script"><link rel="prefetch" href="/assets/index.html-B5J6KQF-.js" as="script"><link rel="prefetch" href="/assets/index.html-C4b9LVpo.js" as="script"><link rel="prefetch" href="/assets/index.html-D2shlFwM.js" as="script"><link rel="prefetch" href="/assets/index.html-D-1L_sCR.js" as="script"><link rel="prefetch" href="/assets/index.html-DG4KHPLu.js" as="script"><link rel="prefetch" href="/assets/index.html-Cjm02nd0.js" as="script"><link rel="prefetch" href="/assets/index.html-CHBL6d5F.js" as="script"><link rel="prefetch" href="/assets/index.html-BYPg82x4.js" as="script"><link rel="prefetch" href="/assets/index.html-B0HHiGaN.js" as="script"><link rel="prefetch" href="/assets/index.html-D58O8XD2.js" as="script"><link rel="prefetch" href="/assets/index.html-cS6MuyU5.js" as="script"><link rel="prefetch" href="/assets/index.html-CT8e4fJR.js" as="script"><link rel="prefetch" href="/assets/index.html-C--cgqhb.js" as="script"><link rel="prefetch" href="/assets/index.html-DpZxKxNz.js" as="script"><link rel="prefetch" href="/assets/index.html-DwhK1IAk.js" as="script"><link rel="prefetch" href="/assets/index.html-CxKOSk6Q.js" as="script"><link rel="prefetch" href="/assets/index.html-n4PuryeE.js" as="script"><link rel="prefetch" href="/assets/index.html-DN5iO7Ts.js" as="script"><link rel="prefetch" href="/assets/index.html-C-xBWIF9.js" as="script"><link rel="prefetch" href="/assets/index.html-Bcs2tb2P.js" as="script"><link rel="prefetch" href="/assets/index.html-CWJ3LPUK.js" as="script"><link rel="prefetch" href="/assets/index.html-CpwE5-5_.js" as="script"><link rel="prefetch" href="/assets/index.html-hOevfWRv.js" as="script"><link rel="prefetch" href="/assets/index.html-Z6_X1VkI.js" as="script"><link rel="prefetch" href="/assets/index.html-DF70QTuX.js" as="script"><link rel="prefetch" href="/assets/index.html-DhDuEoUL.js" as="script"><link rel="prefetch" href="/assets/index.html-DXXJSk65.js" as="script"><link rel="prefetch" href="/assets/index.html-DlqEvwDc.js" as="script"><link rel="prefetch" href="/assets/index.html-ynkbgjrX.js" as="script"><link rel="prefetch" href="/assets/index.html-BejRUr_L.js" as="script"><link rel="prefetch" href="/assets/index.html-BJZQ7r5m.js" as="script"><link rel="prefetch" href="/assets/index.html-DsDt3kcG.js" as="script"><link rel="prefetch" href="/assets/index.html-D3eemPe0.js" as="script"><link rel="prefetch" href="/assets/index.html-CILBeLFa.js" as="script"><link rel="prefetch" href="/assets/index.html-DgFH6nMP.js" as="script"><link rel="prefetch" href="/assets/index.html-BZY0STx0.js" as="script"><link rel="prefetch" href="/assets/index.html-Dw1eogXv.js" as="script"><link rel="prefetch" href="/assets/index.html-C7PPTigf.js" as="script"><link rel="prefetch" href="/assets/index.html-DLoRbjUJ.js" as="script"><link rel="prefetch" href="/assets/index.html-D7O35bqO.js" as="script"><link rel="prefetch" href="/assets/index.html-0sROdSIi.js" as="script"><link rel="prefetch" href="/assets/index.html-vogwj5Gz.js" as="script"><link rel="prefetch" href="/assets/index.html-C-5ERvQ7.js" as="script"><link rel="prefetch" href="/assets/index.html-aVwdO_27.js" as="script"><link rel="prefetch" href="/assets/index.html-CqgLYAlN.js" as="script"><link rel="prefetch" href="/assets/index.html-CtwfLBRq.js" as="script"><link rel="prefetch" href="/assets/index.html-7S8o8yox.js" as="script"><link rel="prefetch" href="/assets/index.html-DFbwA6rd.js" as="script"><link rel="prefetch" href="/assets/index.html-Dub_Vwh4.js" as="script"><link rel="prefetch" href="/assets/index.html-CnQ05pCz.js" as="script"><link rel="prefetch" href="/assets/index.html-B5__wXmH.js" as="script"><link rel="prefetch" href="/assets/index.html-BerwKP_K.js" as="script"><link rel="prefetch" href="/assets/index.html-Dps2KTcI.js" as="script"><link rel="prefetch" href="/assets/index.html-2Ue6fH1M.js" as="script"><link rel="prefetch" href="/assets/index.html-DEbGd5PX.js" as="script"><link rel="prefetch" href="/assets/index.html-BI3gf03N.js" as="script"><link rel="prefetch" href="/assets/index.html-i1X7b3Jb.js" as="script"><link rel="prefetch" href="/assets/index.html-BMMpQ7ep.js" as="script"><link rel="prefetch" href="/assets/index.html-jXPrE3r8.js" as="script"><link rel="prefetch" href="/assets/index.html-C9OKWvc5.js" as="script"><link rel="prefetch" href="/assets/index.html-ZS6Uj9hl.js" as="script"><link rel="prefetch" href="/assets/index.html-Cw14hnAO.js" as="script"><link rel="prefetch" href="/assets/index.html-Cs_ECVGg.js" as="script"><link rel="prefetch" href="/assets/index.html-Db0lCOpb.js" as="script"><link rel="prefetch" href="/assets/index.html-jM31GtOJ.js" as="script"><link rel="prefetch" href="/assets/index.html-Cp9ruFY9.js" as="script"><link rel="prefetch" href="/assets/index.html-DnwWIi7v.js" as="script"><link rel="prefetch" href="/assets/index.html-DF-8JBNb.js" as="script"><link rel="prefetch" href="/assets/giscus-D-fkNSKD.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/assets/image/logo.jpg" alt><!----><span class="vp-site-name hide-in-pad">魔芋丝丝</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="主页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="编程"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-code" style=""></span>编程<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/program/code/" aria-label="代码笔记"><!---->代码笔记<!----></a></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">工具运维</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/program/ops/linux/" aria-label="Linux"><!---->Linux<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/program/ops/macos/" aria-label="MacOS"><!---->MacOS<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/program/ops/db/" aria-label="DB"><!---->DB<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/program/ops/tool/" aria-label="工具"><!---->工具<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="算法"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span>算法<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algorithm/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" aria-label="动态规划"><!---->动态规划<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algorithm/leetcode/" aria-label="力扣练习"><!---->力扣练习<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/insurance/" aria-label="保险理财"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-chart-line" style=""></span><!--]-->保险理财<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="主页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->主页<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Algorithm</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Program</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Code</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2018-09-13-JDK8%E7%9A%84Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" aria-label="JDK8的Lambda表达式"><!---->JDK8的Lambda表达式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2018-09-11-SpringMVC%E5%AE%9E%E4%BD%93%E5%AF%B9%E8%B1%A1%E7%BB%91%E5%AE%9A%E5%8F%82%E6%95%B0%E6%97%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB.html" aria-label="SpringMVC实体对象绑定参数时自定义对应关系"><!---->SpringMVC实体对象绑定参数时自定义对应关系<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-12-30-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%80.html" aria-label="设计模式一"><!---->设计模式一<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-12-03-ARP%E8%AF%A6%E8%A7%A3.html" aria-label="ARP详解"><!---->ARP详解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-11-29-IPv4%E8%AF%A6%E8%A7%A3.html" aria-label="IPv4详解"><!---->IPv4详解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-11-11-Base64%E4%B8%8EURLEncode%E7%AE%80%E4%BB%8B.html" aria-label="Base64与URLEncode简介"><!---->Base64与URLEncode简介<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-11-08-MD5%E4%B8%8ESHA-1%E7%AE%80%E4%BB%8B.html" aria-label="MD5与SHA-1简介"><!---->MD5与SHA-1简介<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-09-30-Spring%E4%B8%AD%E7%9A%84XML%E9%85%8D%E7%BD%AE%E7%9A%84%E5%86%99%E6%B3%95.html" aria-label="Spring中的XML配置的写法"><!---->Spring中的XML配置的写法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-08-14-Spring%20Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" aria-label="Spring Bean的生命周期"><!---->Spring Bean的生命周期<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-05-22-ConcurrentHashMap%E8%AF%A6%E8%A7%A3.html" aria-label="ConcurrentHashMap详解"><!---->ConcurrentHashMap详解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-04-11-ES%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2%E5%8E%9F%E7%90%86.html" aria-label="ES学习之全文检索原理"><!---->ES学习之全文检索原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-05-03-Java%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E4%B9%8BFuture%E6%A8%A1%E5%BC%8F.html" aria-label="Java中的并发之Future模式"><!---->Java中的并发之Future模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-04-06-String%E8%A1%A5%E5%85%85.html" aria-label="String补充"><!---->String补充<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-03-08-HashMap%E8%AF%A6%E8%A7%A3.html" aria-label="HashMap详解"><!---->HashMap详解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2017-03-03-%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB.html" aria-label="事务的隔离级别"><!---->事务的隔离级别<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-12-12-SpringBoot%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE.html" aria-label="SpringBoot多数据源配置"><!---->SpringBoot多数据源配置<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-22-Spring%E7%9A%84%E6%89%A9%E5%B1%95%E7%82%B9.html" aria-label="Spring的扩展点"><!---->Spring的扩展点<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-21-SpringBoot%E5%9C%A8%E5%A4%96%E9%83%A8tomcat%E7%9A%84%E9%83%A8%E7%BD%B2.html" aria-label="SpringBoot在外部tomcat的部署"><!---->SpringBoot在外部tomcat的部署<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-19-SpringBoot%E4%B8%8EServlet%E7%BB%84%E4%BB%B6.html" aria-label="SpringBoot与Servlet组件"><!---->SpringBoot与Servlet组件<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-18-SpringBoot%E4%B8%8EHandlerInterceptor.html" aria-label="SpringBoot与HandlerInterceptor"><!---->SpringBoot与HandlerInterceptor<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-17-SpringBoot%E4%B8%8EHttpMessageConverter.html" aria-label="SpringBoot与HttpMessageConverter"><!---->SpringBoot与HttpMessageConverter<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-16-Servlet%E8%AF%A6%E8%A7%A3.html" aria-label="Servlet详解"><!---->Servlet详解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-09-%E5%85%B3%E4%BA%8E%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html" aria-label="关于单元测试"><!---->关于单元测试<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-03-SpringBoot%E4%B8%AD%E7%9A%84%E6%97%A5%E5%BF%97.html" aria-label="SpringBoot中的日志"><!---->SpringBoot中的日志<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-06-SpringBoot%E9%9B%86%E6%88%90MyBatis.html" aria-label="SpringBoot集成MyBatis"><!---->SpringBoot集成MyBatis<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-11-02-SpringBoot%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE.html" aria-label="SpringBoot中的配置"><!---->SpringBoot中的配置<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-10-30-%E4%BD%BF%E7%94%A8SpringBoot%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BA%E5%BA%94%E7%94%A8.html" aria-label="使用SpringBoot快速构建应用"><!---->使用SpringBoot快速构建应用<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-08-31-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86.html" aria-label="动态代理"><!---->动态代理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-08-14-Drools%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B.html" aria-label="Drools简单使用示例"><!---->Drools简单使用示例<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-08-12-Drools%E8%AF%AD%E6%B3%95%E8%AF%A6%E8%A7%A3.html" aria-label="Drools语法详解"><!---->Drools语法详解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-08-08-Spring%E7%9A%84EL%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" aria-label="Spring的EL表达式"><!---->Spring的EL表达式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-06-29-Java%E6%97%A5%E6%9C%9F%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7JodaTime.html" aria-label="Java日期处理工具JodaTime"><!---->Java日期处理工具JodaTime<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-06-25-%E5%8D%81%E5%88%86%E9%92%9F%E4%BA%86%E8%A7%A3BIO%E3%80%81NIO%E3%80%81AIO.html" aria-label="十分钟了解BIO、NIO、AIO"><!---->十分钟了解BIO、NIO、AIO<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-06-20-Java%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81.html" aria-label="Java线程状态"><!---->Java线程状态<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-06-01-AOP%E4%B8%AD%E8%8E%B7%E5%8F%96%E6%96%B9%E6%B3%95%E4%B8%8A%E7%9A%84%E6%B3%A8%E8%A7%A3%E4%BF%A1%E6%81%AF.html" aria-label="AOP中获取方法上的注解信息"><!---->AOP中获取方法上的注解信息<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-04-12-HBase%20Shell%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93.html" aria-label="HBase Shell命令总结"><!---->HBase Shell命令总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-04-11-SpringMVC%E8%A7%A3%E5%86%B3GET%E5%8F%82%E6%95%B0%E4%B9%B1%E7%A0%81.html" aria-label="SpringMVC解决GET参数乱码"><!---->SpringMVC解决GET参数乱码<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-03-25-%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C.html" aria-label="一致性哈希"><!---->一致性哈希<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-03-01-java%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91(%E4%BA%8C).html" aria-label="Java中的并发(二)"><!---->Java中的并发(二)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-03-04-java%E4%B8%AD%E7%9A%84%E5%BC%B1%E5%BC%95%E7%94%A8.html" aria-label="Java中的弱引用"><!---->Java中的弱引用<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-02-25-Class%E7%B1%BB%E7%AE%80%E4%BB%8B.html" aria-label="Class类简介"><!---->Class类简介<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/program/code/2016-02-24-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%BC%95%E6%93%8Eaviator.html" aria-label="表达式引擎aviator"><!---->表达式引擎aviator<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-02-16-Type%E8%AF%A6%E8%A7%A3.html" aria-label="Java中的Type详解"><!---->Java中的Type详解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-01-29-Hadoop%E9%A1%B9%E7%9B%AE%E6%A1%86%E6%9E%B6.html" aria-label="Hadoop项目框架"><!---->Hadoop项目框架<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2016-01-14-java%E4%B8%AD%E7%9A%84%E5%8F%8D%E5%B0%84.html" aria-label="java中的反射"><!---->java中的反射<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-12-25-SpringMVC%E4%B9%8BController%E6%8E%A7%E5%88%B6%E5%99%A8.html" aria-label="SpringMVC之Controller控制器"><!---->SpringMVC之Controller控制器<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-26-Spring%E7%9A%84AOP.html" aria-label="Spring的AOP"><!---->Spring的AOP<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-23-Guava%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88.html" aria-label="Guava不可变集合"><!---->Guava不可变集合<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-21-Guava%E4%B9%8BCharMatcher.html" aria-label="Guava之CharMatcher"><!---->Guava之CharMatcher<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-20-Guava%E4%B9%8BSplitter.html" aria-label="Guava之Splitter"><!---->Guava之Splitter<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-19-Guava%E4%B9%8BJoiner.html" aria-label="Guava之Joiner"><!---->Guava之Joiner<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-18-Guava%E6%96%B0%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B.html" aria-label="Guava新集合类型"><!---->Guava新集合类型<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-16-Guava%E4%B9%8BOrdering.html" aria-label="Guava之Ordering"><!---->Guava之Ordering<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-13-Collections%E5%B7%A5%E5%85%B7%E7%B1%BB.html" aria-label="Collections工具类"><!---->Collections工具类<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-12-Collection%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95.html" aria-label="Collection中的方法"><!---->Collection中的方法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-12-Collection%E7%9A%84toArray%E6%96%B9%E6%B3%95.html" aria-label="Collection的toArray方法"><!---->Collection的toArray方法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-12-Map%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95.html" aria-label="Map中的方法"><!---->Map中的方法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-11-Guava%E4%B9%8BOptional.html" aria-label="Guava之Optional"><!---->Guava之Optional<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-11-Guava%E4%B9%8BPreconditions.html" aria-label="Guava之Preconditions"><!---->Guava之Preconditions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-11-10-Guava%E4%B9%8BObjects.html" aria-label="Guava之Objects"><!---->Guava之Objects<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-10-24-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" aria-label="正则表达式"><!---->正则表达式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-10-22-CSS%E9%80%89%E6%8B%A9%E5%99%A8.html" aria-label="CSS选择器"><!---->CSS选择器<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-10-20-javaWeb%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%AF%B7%E6%B1%82%E8%B7%AF%E5%BE%84.html" aria-label="HttpServletRequest的请求路径"><!---->HttpServletRequest的请求路径<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-08-27-Json%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%A0%BC%E5%BC%8F.html" aria-label="Json对象的格式"><!---->Json对象的格式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-07-03-java%E6%97%A5%E5%BF%97(%E4%B8%89)logback%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html" aria-label="java日志(三):logback配置文件"><!---->java日志(三):logback配置文件<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-06-24-CSRF.html" aria-label="CSRF"><!---->CSRF<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-06-11-java%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F.html" aria-label="java对象的内存大小"><!---->java对象的内存大小<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-06-04-java%E6%97%A5%E5%BF%97(%E4%BA%8C)JUL%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.html" aria-label="java日志(二):JUL源码分析"><!---->java日志(二):JUL源码分析<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-05-18-java%E6%97%A5%E5%BF%97(%E4%B8%80)%E6%97%A5%E5%BF%97%E7%BB%84%E4%BB%B6%E7%9A%84%E7%AE%80%E4%BB%8B%E5%8F%8A%E4%BD%BF%E7%94%A8.html" aria-label="java日志(一):日志组件简介及使用"><!---->java日志(一):日志组件简介及使用<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-04-27-java%E6%B3%A8%E8%A7%A3(Annotation).html" aria-label="java注解(Annotation)"><!---->java注解(Annotation)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-02-21-java%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8.html" aria-label="Java类加载器"><!---->Java类加载器<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-02-16-java%E5%9F%BA%E7%A1%80%E6%95%B4%E7%90%86.html" aria-label="Java基础整理"><!---->Java基础整理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-02-14-Java%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8.html" aria-label="Java中的异常"><!---->Java中的异常<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-02-05-Spring(%E4%BA%94)SpringMVC%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="Spring(五): SpringMVC的简单使用"><!---->Spring(五): SpringMVC的简单使用<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-02-02-Spring(%E5%9B%9B)Spring%E6%95%B4%E5%90%88MyBatis.html" aria-label="Spring(四): Spring整合MyBatis"><!---->Spring(四): Spring整合MyBatis<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-01-29-Spring(%E4%B8%89)%E6%B3%A8%E8%A7%A3.html" aria-label="Spring(三): 注解"><!---->Spring(三): 注解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-01-28-Spring(%E4%BA%8C)%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95.html" aria-label="Spring(二): 基本用法"><!---->Spring(二): 基本用法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-01-26-Spring(%E4%B8%80)%E5%85%A5%E9%97%A8.html" aria-label="Spring(一): 入门"><!---->Spring(一): 入门<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-01-24-MyBatis(%E5%9B%9B)%E5%8A%A8%E6%80%81SQL.html" aria-label="MyBatis(四): 动态SQL"><!---->MyBatis(四): 动态SQL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-01-22-MyBatis(%E4%B8%89)Mapper.xml%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6.html" aria-label="MyBatis(三): Mapper.xml映射文件"><!---->MyBatis(三): Mapper.xml映射文件<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-01-20-MyBatis(%E4%BA%8C)%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html" aria-label="MyBatis(二): 配置文件"><!---->MyBatis(二): 配置文件<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-01-18-MyBatis(%E4%B8%80)%E5%85%A5%E9%97%A8.html" aria-label="MyBatis(一):入门"><!---->MyBatis(一):入门<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/program/code/2015-01-05-java%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91.html" aria-label="java中的并发"><!---->java中的并发<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ops</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-chart-line" style=""></span><span class="vp-sidebar-title">保险理财</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/portfolio.html" aria-label="档案主页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->档案主页<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/project.html" aria-label="项目主页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->项目主页<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->表达式引擎aviator</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">moyusisi</span></span><span property="author" content="moyusisi"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2016-02-24T00:00:00.000Z"></span><!----><!----><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">Java</span><!--]--><meta property="articleSection" content="Java"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color6 clickable" role="navigation">Aviator</span><!--]--><meta property="keywords" content="Aviator"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#简介">简介</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#包依赖">包依赖</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#使用手册">使用手册</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#执行表达式">执行表达式</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#使用变量">使用变量</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#exec-方法">exec 方法</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#调用函数">调用函数</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#自定义函数">自定义函数</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#编译表达式">编译表达式</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#访问数组和集合">访问数组和集合</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#三元操作符">三元操作符</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#正则表达式匹配">正则表达式匹配</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#变量的语法糖">变量的语法糖</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#nil-对象">nil 对象</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#日期比较">日期比较</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#大数计算和精度">大数计算和精度</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#强大的-seq-库">强大的 seq 库</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#两种运行模式">两种运行模式</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#调试信息">调试信息</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#语法手册">语法手册</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#数据类型">数据类型</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#操作符">操作符</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#内置函数">内置函数</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#相关链接">相关链接</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><p>Aviator是一个轻量级、高性能的Java表达式执行引擎, 本文内容主要来自于官方文档</p><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>Aviator是一个高性能、轻量级的 java 语言实现的表达式求值引擎, 主要用于各种表达式的动态求值。现在已经有很多开源可用的 java 表达式求值引擎,为什么还需要 Avaitor 呢?<br> Aviator的设计目标是轻量级和高性能,相比于Groovy、JRuby的笨重, Aviator非常小, 加上依赖包也才450K,不算依赖包的话只有 70K; 当然, Aviator的语法是受限的, 它不是一门完整的语言, 而只是语言的一小部分集合。<br> 其次, Aviator的实现思路与其他轻量级的求值器很不相同, 其他求值器一般都是通过解释的方式运行, 而Aviator则是直接将表达式编译成Java 字节码, 交给JVM去执行。简单来说, Aviator的定位是介于Groovy这样的重量级脚本语言和IKExpression这样的轻量级表达式引擎 之间。<br> Aviator支持大部分运算操作符, 包括算术操作符、关系运算符、逻辑操作符、位运算符、正则匹配操作符(<code>=~</code>)、三元表达式(<code>?:</code>), 并且支持操作符的优先级和括号强制优先级, 具体请看后面的操作符列表, 支持自定义函数.</p><h2 id="包依赖" tabindex="-1"><a class="header-anchor" href="#包依赖"><span>包依赖</span></a></h2><p>Aviator依赖了<code>commons-beanutils</code>, 使用Aviator可以添加下面的maven依赖:</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;com.googlecode.aviator&lt;/</span><span style="color:#85E89D;">groupId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;aviator&lt;/</span><span style="color:#85E89D;">artifactId</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;2.3.3&lt;/</span><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dependency</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用手册" tabindex="-1"><a class="header-anchor" href="#使用手册"><span>使用手册</span></a></h2><h3 id="执行表达式" tabindex="-1"><a class="header-anchor" href="#执行表达式"><span>执行表达式</span></a></h3><p>Aviator的使用都是集中通过<code>com.googlecode.aviator.AviatorEvaluator</code>这个入口类来处理, 最简单的例子, 执行一个计算<code>1+2+3</code>的表达式:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> com.googlecode.aviator.AviatorEvaluator;</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> TestAviator</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Long result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (Long) AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;1+2+3&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>细心的朋友肯定注意到结果是<code>Long</code>,而不是<code>Integer</code>。这是因为<code>Aviator</code>的数值类型仅支持<code>Long</code>和<code>Double</code>, 任何整数都将转换成<code>Long</code>, 任何浮点数都将转换为<code>Double</code>, 包括用户传入的变量数值。这个例子的打印结果将是正确答案<code>6</code>。</p><h3 id="使用变量" tabindex="-1"><a class="header-anchor" href="#使用变量"><span>使用变量</span></a></h3><p>想让Aviator对你<code>say hello</code>吗? 很简单, 传入你的名字, 让Aviator负责字符串的相加:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> TestAviator</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        String yourName </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &quot;Michael&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; env </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> HashMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">        env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;yourName&quot;</span><span style="color:#E1E4E8;">, yourName);</span></span>
<span class="line"><span style="color:#E1E4E8;">        String result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (String) AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; &#39;hello &#39; + yourName &quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// hello Michael</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的例子演示了怎么向表达式传入变量值, 表达式中的<code>yourName</code>是一个变量, 默认为<code>null</code>, 通过传入<code>Map&lt;String,Object&gt;</code>的变量绑定环境, 将<code>yourName</code>设置为你输入的名称。 <code>env</code> 的<code>key</code>是变量名, <code>value</code>是变量的值。<br> 上面例子中的<code>&#39;hello &#39;</code>是一个<code>Aviator</code>的<code>String</code>, <code>Aviator</code>的<code>String</code>是任何用单引号或者双引号括起来的字符序列, <code>String</code>可以比较大小(基于<code>unicode</code>顺序), 可以参与正则匹配, 可以与任何对象相加, 任何对象与<code>String</code>相加结果为<code>String</code>。 <code>String</code>中也可以有转义字符,如<code>\n、\\、\&#39;</code> 等。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; &#39;a</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">b&#39; &quot;</span><span style="color:#E1E4E8;">);           </span><span style="color:#6A737D;">// 字符串 a&quot;b</span></span>
<span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; </span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">a</span><span style="color:#79B8FF;">\&#39;</span><span style="color:#9ECBFF;">b</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;"> &quot;</span><span style="color:#E1E4E8;">);         </span><span style="color:#6A737D;">// 字符串 a&#39;b</span></span>
<span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; &#39;hello &#39; + 3 &quot;</span><span style="color:#E1E4E8;">);     </span><span style="color:#6A737D;">// 字符串 hello 3</span></span>
<span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; &#39;hello &#39;+ unknow &quot;</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">// 字符串 hello null</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="exec-方法" tabindex="-1"><a class="header-anchor" href="#exec-方法"><span>exec 方法</span></a></h3><p>Aviator 2.2 开始新增加一个<code>exec</code>方法, 可以更方便地传入变量并执行, 而不需要构造<code>env</code>这个<code>map</code>了:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">String name </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &quot;dennis&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; &#39;hello &#39; + yourName &quot;</span><span style="color:#E1E4E8;">, name); </span><span style="color:#6A737D;">// hello dennis</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>只要在<code>exec</code>中按照变量在表达式中的出现顺序传入变量值就可以执行, 不需要构建<code>Map</code>了。</p><h3 id="调用函数" tabindex="-1"><a class="header-anchor" href="#调用函数"><span>调用函数</span></a></h3><p>Aviator 支持函数调用, 函数调用的风格类似 lua, 下面的例子获取字符串的长度:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;string.length(&#39;hello&#39;)&quot;</span><span style="color:#E1E4E8;">);  </span><span style="color:#6A737D;">// 5</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>string.length(&#39;hello&#39;)</code>是一个函数调用, <code>string.length</code>是一个函数, <code>&#39;hello&#39;</code>是调用的参数。<br> 再用<code>string.substring</code>来截取字符串:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;string.contains(</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">test</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">, string.substring(&#39;hello&#39;, 1, 2))&quot;</span><span style="color:#E1E4E8;">);  </span><span style="color:#6A737D;">// true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>通过<code>string.substring(&#39;hello&#39;, 1, 2)</code>获取字符串<code>&#39;e&#39;</code>, 然后通过函数<code>string.contains</code>判断<code>e</code>是否在<code>&#39;test&#39;</code>中。可以看到, 函数可以嵌套调用。<br> Aviator 的内置函数列表请看后面。</p><h3 id="自定义函数" tabindex="-1"><a class="header-anchor" href="#自定义函数"><span>自定义函数</span></a></h3><p>Aviator 除了内置的函数之外,还允许用户自定义函数,只要实现<code>com.googlecode.aviator.runtime.type.AviatorFunction</code>接口, 并注册到<code>AviatorEvaluator</code>即可使用. <code>AviatorFunction</code>接口十分庞大, 通常来说你并不需要实现所有的方法, 只要根据你的方法的参 数个数, 继承<code>AbstractFunction</code>类并<code>override</code>相应方法即可。</p><p>可以看一个例子,我们实现一个<code>add</code>函数来做数值的相加:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> TestAviator</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#6A737D;">        //注册函数</span></span>
<span class="line"><span style="color:#E1E4E8;">        AviatorEvaluator.</span><span style="color:#B392F0;">addFunction</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> AddFunction</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;add(1, 2)&quot;</span><span style="color:#E1E4E8;">));           </span><span style="color:#6A737D;">// 3.0</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;add(add(1, 2), 100)&quot;</span><span style="color:#E1E4E8;">)); </span><span style="color:#6A737D;">// 103.0</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> AddFunction</span><span style="color:#F97583;"> extends</span><span style="color:#B392F0;"> AbstractFunction</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    @</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">    public</span><span style="color:#E1E4E8;"> AviatorObject </span><span style="color:#B392F0;">call</span><span style="color:#E1E4E8;">(Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">, AviatorObject </span><span style="color:#FFAB70;">arg1</span><span style="color:#E1E4E8;">, AviatorObject </span><span style="color:#FFAB70;">arg2</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Number left </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> FunctionUtils.</span><span style="color:#B392F0;">getNumberValue</span><span style="color:#E1E4E8;">(arg1, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Number right </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> FunctionUtils.</span><span style="color:#B392F0;">getNumberValue</span><span style="color:#E1E4E8;">(arg2, env);</span></span>
<span class="line"><span style="color:#F97583;">        return</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> AviatorDouble</span><span style="color:#E1E4E8;">(left.</span><span style="color:#B392F0;">doubleValue</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> right.</span><span style="color:#B392F0;">doubleValue</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#F97583;">    public</span><span style="color:#E1E4E8;"> String </span><span style="color:#B392F0;">getName</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">        return</span><span style="color:#9ECBFF;"> &quot;add&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注册函数通过<code>AviatorEvaluator.addFunction</code>方法, 移除可以通过<code>removeFunction</code>。</p><h3 id="编译表达式" tabindex="-1"><a class="header-anchor" href="#编译表达式"><span>编译表达式</span></a></h3><p>上面提到的例子都是直接执行表达式, 事实上 Aviator 背后都帮你做了编译并执行的工作。 你可以自己先编译表达式, 返回一个编译的结果, 然后传入不同的<code>env</code>来复用编译结果, 提高性能, 这是更推荐的使用方式:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> TestAviator</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        String expression </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &quot;a-(b-c)&gt;100&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">        // 编译表达式</span></span>
<span class="line"><span style="color:#E1E4E8;">        Expression compiledExp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">compile</span><span style="color:#E1E4E8;">(expression);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; env </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> HashMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">        env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;a&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">100.3</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;b&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">45</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;c&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">199.100</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">        // 执行表达式</span></span>
<span class="line"><span style="color:#E1E4E8;">        Boolean result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (Boolean) compiledExp.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(env);</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过<code>compile</code>方法可以将表达式编译成<code>Expression</code>的中间对象, 当要执行表达式的时候传入<code>env</code>并调用<code>Expression</code>的<code>execute</code>方法即可。 表达式中使用了括号来强制优先级, 这个例子还使用了<code>&gt;</code>用于比较数值大小, 比较运算符<code>!=、==、&gt;、&gt;=、&lt;、&lt;=</code>不仅可以用于数值, 也可以用于<code>String、Pattern、Boolean</code>等等, 甚至是任何用户传入的两个都实现了<code>java.lang.Comparable</code>接口的对象之间。</p><p>编译后的结果你可以自己缓存, 也可以交给 Aviator 帮你缓存, <code>AviatorEvaluator</code>内部有一个全局的缓存池, 如果你决定缓存编译结果, 可以通过:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> static</span><span style="color:#E1E4E8;"> Expression </span><span style="color:#B392F0;">compile</span><span style="color:#E1E4E8;">(String expression, </span><span style="color:#F97583;">boolean</span><span style="color:#E1E4E8;"> cached)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>将<code>cached</code>设置为<code>true</code>即可, 那么下次编译同一个表达式的时候将直接返回上一次编译的结果。<br> 使缓存失效通过:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> invalidateCache</span><span style="color:#E1E4E8;">(String expression)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>方法。</p><h3 id="访问数组和集合" tabindex="-1"><a class="header-anchor" href="#访问数组和集合"><span>访问数组和集合</span></a></h3><p>可以通过中括号去访问数组和<code>java.util.List</code>对象, 可以通过<code>map.key</code>访问<code>java.util.Map</code>中<code>key</code>对应的<code>value</code>, 一个例子:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#F97583;">    final</span><span style="color:#E1E4E8;"> List&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt; list </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> ArrayList&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">    list.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;hello&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    list.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; world&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">    final</span><span style="color:#F97583;"> int</span><span style="color:#E1E4E8;">[] array </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#F97583;"> int</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">    array[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    array[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    array[</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 3</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">    final</span><span style="color:#E1E4E8;"> Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Date</span><span style="color:#E1E4E8;">&gt; map </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> HashMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Date</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">    map.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;date&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Date</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">    Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; env </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> HashMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">    env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;list&quot;</span><span style="color:#E1E4E8;">, list);</span></span>
<span class="line"><span style="color:#E1E4E8;">    env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;array&quot;</span><span style="color:#E1E4E8;">, array);</span></span>
<span class="line"><span style="color:#E1E4E8;">    env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;mmap&quot;</span><span style="color:#E1E4E8;">, map);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;list[0]+list[1]&quot;</span><span style="color:#E1E4E8;">, env));   </span><span style="color:#6A737D;">// hello world</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&#39;array[0]+array[1]+array[2]=&#39; + (array[0]+array[1]+array[2])&quot;</span><span style="color:#E1E4E8;">, env));  </span><span style="color:#6A737D;">// array[0]+array[1]+array[2]=4</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&#39;today is &#39; + mmap.date &quot;</span><span style="color:#E1E4E8;">, env));  </span><span style="color:#6A737D;">// today is Wed Feb 24 17:31:45 CST 2016</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="三元操作符" tabindex="-1"><a class="header-anchor" href="#三元操作符"><span>三元操作符</span></a></h3><p>Aviator 不提供<code>if else</code>语句, 但是提供了三元操作符<code>?:</code>用于条件判断,使用上与 java 没有什么不同:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;a&gt;0? &#39;yes&#39;:&#39;no&#39;&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);  </span><span style="color:#6A737D;">// yes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Aviator 的三元表达式对于两个分支的结果类型并不要求一致,可以是任何类型,这一点与 java 不同。</p><h3 id="正则表达式匹配" tabindex="-1"><a class="header-anchor" href="#正则表达式匹配"><span>正则表达式匹配</span></a></h3><p>Aviator 支持类 Ruby 和 Perl 风格的表达式匹配运算,通过<code>=~</code>操作符, 如下面这个例子匹配 email 并提取用户名返回:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    String email </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &quot;killme2008@gmail.com&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; env </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> HashMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">    env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;email&quot;</span><span style="color:#E1E4E8;">, email);</span></span>
<span class="line"><span style="color:#E1E4E8;">    String username </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (String) AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;email=~/([</span><span style="color:#79B8FF;">\\</span><span style="color:#9ECBFF;">w0-8]+)@</span><span style="color:#79B8FF;">\\</span><span style="color:#9ECBFF;">w+[</span><span style="color:#79B8FF;">\\</span><span style="color:#9ECBFF;">.</span><span style="color:#79B8FF;">\\</span><span style="color:#9ECBFF;">w+]+/ ? $1 : &#39;unknow&#39; &quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(username); </span><span style="color:#6A737D;">// killme2008</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>email</code>与正则表达式<code>/([\\w0-8]+@\\w+[\\.\\w+]+)/</code>通过<code>=~</code>操作符来匹配,结果为一个 <code>Boolean</code> 类 型, 因此可以用于三元表达式判断,匹配成功的时候返回<code>$1</code>,指代正则表达式的分组 1,也就是用户名,否则返回<code>unknown</code>。</p><p>Aviator 在表达式级别支持正则表达式,通过<code>//</code>括起来的字符序列构成一个正则表达式,正则表 达式可以用于匹配(作为<code>=~</code>的右操作数)、比较大小,匹配仅能与字符串进行匹配。匹配成功后, Aviator 会自动将匹配成功的分组放入<code>$num</code>的变量中,其中<code>$0</code> 指代整个匹配的字符串,而<code>$1</code>表示第一个分组,以此类推。</p><p>Aviator 的正则表达式规则跟 Java 完全一样,因为内部其实就是使用<code>java.util.regex.Pattern</code>做编译的。</p><h3 id="变量的语法糖" tabindex="-1"><a class="header-anchor" href="#变量的语法糖"><span>变量的语法糖</span></a></h3><p>Aviator 有个方便用户使用变量的语法糖, 当你要访问变量<code>a</code>中的某个属性<code>b</code>, 那么你可以通过<code>a.b</code>访问到, 更进一步, <code>a.b.c</code>将访问变量<code>a</code>的<code>b</code>属性中的<code>c</code>属性值, 推广开来也就是说 Aviator 可以将变量声明为嵌套访问的形式。<br><code>TestAviator</code>类符合<code>JavaBean</code>规范, 并且是 <code>public</code> 的，我们就可以使用语法糖:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> TestAviator</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    int</span><span style="color:#E1E4E8;"> i;</span></span>
<span class="line"><span style="color:#F97583;">    float</span><span style="color:#E1E4E8;"> f;</span></span>
<span class="line"><span style="color:#E1E4E8;">    Date date;</span></span>
<span class="line"><span style="color:#6A737D;">    // 构造方法</span></span>
<span class="line"><span style="color:#F97583;">    public</span><span style="color:#B392F0;"> TestAviator</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">int</span><span style="color:#FFAB70;"> i</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">float</span><span style="color:#FFAB70;"> f</span><span style="color:#E1E4E8;">, Date </span><span style="color:#FFAB70;">date</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> i;</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.f </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> f;</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.date </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> date;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#6A737D;">    // getter and setter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">    public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        TestAviator foo </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> TestAviator</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3.14f</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Date</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">        Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; env </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> HashMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">        env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;foo&quot;</span><span style="color:#E1E4E8;">, foo);</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&#39;foo.i = &#39;+foo.i&quot;</span><span style="color:#E1E4E8;">, env));   </span><span style="color:#6A737D;">// foo.i = 100</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&#39;foo.f = &#39;+foo.f&quot;</span><span style="color:#E1E4E8;">, env));   </span><span style="color:#6A737D;">// foo.f = 3.14</span></span>
<span class="line"><span style="color:#E1E4E8;">        System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&#39;foo.date.year = &#39;+(foo.date.year+1990)&quot;</span><span style="color:#E1E4E8;">, env));  </span><span style="color:#6A737D;">// foo.date.year = 2106</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nil-对象" tabindex="-1"><a class="header-anchor" href="#nil-对象"><span>nil 对象</span></a></h3><p><code>nil</code>是 Aviator 内置的常量,类似 java 中的<code>null</code>,表示空的值。<code>nil</code>跟<code>null</code>不同的在于,在 java 中<code>null</code>只能使用在<code>==、!=</code>的比较运算符,而<code>nil</code>还可以使用<code>&gt;、&gt;=、&lt;、&lt;=</code>等比较运算符。 Aviator 规定,任何对象都比<code>nil</code>大除了<code>nil</code>本身。用户传入的变量如果为<code>null</code>,将自动以<code>nil</code>替代。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;nil == nil&quot;</span><span style="color:#E1E4E8;">);   </span><span style="color:#6A737D;">//true</span></span>
<span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; 3&gt; nil&quot;</span><span style="color:#E1E4E8;">);      </span><span style="color:#6A737D;">//true</span></span>
<span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; true!= nil&quot;</span><span style="color:#E1E4E8;">);  </span><span style="color:#6A737D;">//true</span></span>
<span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; &#39; &#39;&gt;nil &quot;</span><span style="color:#E1E4E8;">);    </span><span style="color:#6A737D;">//true</span></span>
<span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; a==nil &quot;</span><span style="color:#E1E4E8;">);     </span><span style="color:#6A737D;">//true, a 是 null</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>nil</code>与<code>String</code>相加的时候,跟 java 一样显示为 <code>null</code></p><h3 id="日期比较" tabindex="-1"><a class="header-anchor" href="#日期比较"><span>日期比较</span></a></h3><p>Aviator 并不支持日期类型,如果要比较日期,你需要将日期写字符串的形式,并且要求是形如 &quot;yyyy-MM-dd HH:mm:ss:SS&quot;的字符串,否则都将报错。 字符串跟<code>java.util.Date</code>比较的时候将自动转换为<code>Date</code>对象进行比较:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; env </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> HashMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#F97583;">    final</span><span style="color:#E1E4E8;"> Date date </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> Date</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    String dateStr </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> SimpleDateFormat</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;yyyy-MM-dd HH:mm:ss:SS&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">format</span><span style="color:#E1E4E8;">(date);</span></span>
<span class="line"><span style="color:#E1E4E8;">    env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;date&quot;</span><span style="color:#E1E4E8;">, date);</span></span>
<span class="line"><span style="color:#E1E4E8;">    env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;dateStr&quot;</span><span style="color:#E1E4E8;">, dateStr);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Boolean result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (Boolean) AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;date==dateStr&quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (Boolean) AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;date &gt; &#39;2010-12-20 00:00:00:00&#39; &quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (Boolean) AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;date &lt; &#39;2200-12-20 00:00:00:00&#39; &quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (Boolean) AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;date==date &quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也就是说<code>String</code>除了能跟<code>String</code>比较之外,还能跟<code>nil</code>和<code>java.util.Date</code>对象比较。</p><h3 id="大数计算和精度" tabindex="-1"><a class="header-anchor" href="#大数计算和精度"><span>大数计算和精度</span></a></h3><p>从 2.3.0 版本开始,aviator 开始支持大数字计算和特定精度的计算, 本质上就是支持<code>java.math.BigInteger</code>和<code>java.math.BigDecimal</code>两种类型, 这两种类型在 aviator 中简称 为<code>big int</code>和<code>decimal</code>类型。 类似<code>99999999999999999999999999999999</code>这样的数字在 Java 语言里是没办法编译通过 的, 因为它超过了<code>Long</code>类型的范围, 只能用<code>BigInteger</code>来封装。但是 aviator 通过包装,可 以直接支持这种大整数的计算,例如:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(AviatorEvaluator.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;99999999999999999999999999999999 + 99999999999999999999999999999999&quot;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结果为类型<code>big int</code>的: <code>199999999999999999999999999999998</code></p><h4 id="字面量表示" tabindex="-1"><a class="header-anchor" href="#字面量表示"><span>字面量表示</span></a></h4><p><code>big int</code>和<code>decimal</code>的表示与其他数字不同,两条规则:</p><ul><li>以大写字母<code>N</code>为后缀的整数都被认为是<code>big int</code>,如<code>1N,2N,9999999999999999999999N</code>等, 都是<code>big int</code>类型。</li><li>超过<code>long</code>范围的整数字面量都将自动转换为<code>big int</code>类型。</li><li>以大写字母<code>M</code>为后缀的数字都被认为是<code>decimal</code>, 如<code>1M,2.222M, 100000.9999M</code>等, 都是<code>decimal</code>类型。</li></ul><p>用户也可以通过变量传入这两种类型来参与计算。</p><h4 id="运算" tabindex="-1"><a class="header-anchor" href="#运算"><span>运算</span></a></h4><p><code>big int</code>和<code>decimal</code>的运算,跟其他数字类型<code>long,double</code>没有什么区别,操作符仍然是一样的。 aviator重载了基本算术操作符来支持这两种新类型:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Object rt </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;9223372036854775807100.356M * 2&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rt </span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;"> &quot; &quot;</span><span style="color:#F97583;"> +</span><span style="color:#E1E4E8;"> rt.</span><span style="color:#B392F0;">getClass</span><span style="color:#E1E4E8;">());  </span><span style="color:#6A737D;">// 18446744073709551614200.712 class java.math.BigDecimal</span></span>
<span class="line"><span style="color:#E1E4E8;">    rt </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;92233720368547758074+1000&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rt </span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;"> &quot; &quot;</span><span style="color:#F97583;"> +</span><span style="color:#E1E4E8;"> rt.</span><span style="color:#B392F0;">getClass</span><span style="color:#E1E4E8;">());  </span><span style="color:#6A737D;">// 92233720368547759074 class java.math.BigInteger</span></span>
<span class="line"><span style="color:#E1E4E8;">    BigInteger a </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> BigInteger</span><span style="color:#E1E4E8;">(String.</span><span style="color:#B392F0;">valueOf</span><span style="color:#E1E4E8;">(Long.MAX_VALUE) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> String.</span><span style="color:#B392F0;">valueOf</span><span style="color:#E1E4E8;">(Long.MAX_VALUE));</span></span>
<span class="line"><span style="color:#E1E4E8;">    BigDecimal b </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> BigDecimal</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;3.2&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    BigDecimal c </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> BigDecimal</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;9999.99999&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    rt </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;a+10000000000000000000&quot;</span><span style="color:#E1E4E8;">, a);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rt </span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;"> &quot; &quot;</span><span style="color:#F97583;"> +</span><span style="color:#E1E4E8;"> rt.</span><span style="color:#B392F0;">getClass</span><span style="color:#E1E4E8;">());  </span><span style="color:#6A737D;">// 92233720368547758089223372036854775807 class java.math.BigInteger</span></span>
<span class="line"><span style="color:#E1E4E8;">    rt </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;b+c*2&quot;</span><span style="color:#E1E4E8;">, b, c);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rt </span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;"> &quot; &quot;</span><span style="color:#F97583;"> +</span><span style="color:#E1E4E8;"> rt.</span><span style="color:#B392F0;">getClass</span><span style="color:#E1E4E8;">());  </span><span style="color:#6A737D;">// 20003.19998 class java.math.BigDecimal</span></span>
<span class="line"><span style="color:#E1E4E8;">    rt </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;a*b/c&quot;</span><span style="color:#E1E4E8;">, a, b, c);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(rt </span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;"> &quot; &quot;</span><span style="color:#F97583;"> +</span><span style="color:#E1E4E8;"> rt.</span><span style="color:#B392F0;">getClass</span><span style="color:#E1E4E8;">());  </span><span style="color:#6A737D;">// 2.951479054745007313280155218459508E+34 class java.math.BigDecimal</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="类型转换和提升" tabindex="-1"><a class="header-anchor" href="#类型转换和提升"><span>类型转换和提升</span></a></h4><p>当<code>big int</code>或者<code>decimal</code>和其他类型的数字做运算的时候,按照<code>long &lt; big int &lt; decimal &lt; double</code>的规则做提升, 也就是说运算的数字如果类型不一致, 结果的类型为两者之间更“高”的类型。例如:</p><ul><li><code>1 + 3N</code>, 结果为<code>big int</code>的<code>4N</code></li><li><code>1 + 3.1M</code>,结果为<code>decimal</code>的<code>4.1M</code></li><li><code>1N + 3.1M</code>,结果为<code>decimal</code>的 <code>4.1M</code></li><li><code>1.0 + 3N</code>,结果为<code>double</code>的<code>4.0</code></li><li><code>1.0 + 3.1M</code>,结果为<code>double</code>的<code>4.1</code></li></ul><h4 id="decimal-的计算精度" tabindex="-1"><a class="header-anchor" href="#decimal-的计算精度"><span>decimal 的计算精度</span></a></h4><p>Java 的<code>java.math.BigDecimal</code>通过<code>java.math.MathContext</code>支持特定精度的计算,任何涉及到金额的计算都应该使用<code>decimal</code>类型。</p><p>默认 Aviator 的计算精度为<code>MathContext.DECIMAL128</code>,你可以自定义精度, 通过:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">setMathContext</span><span style="color:#E1E4E8;">(MathContext.DECIMAL64);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>即可设置,更多关于<code>decimal</code>的精度问题请看<code>java.math.BigDecimal</code>的 javadoc 文档。</p><h3 id="强大的-seq-库" tabindex="-1"><a class="header-anchor" href="#强大的-seq-库"><span>强大的 seq 库</span></a></h3><p>aviator 拥有强大的操作集合和数组的 <code>seq</code> 库。整个库风格类似函数式编程中的高阶函数。在 aviator 中, 数组以及<code>java.util.Collection</code>下的子类都称为<code>seq</code>,可以直接利用 <code>seq</code> 库进行遍历、过滤和聚合等操作。</p><p>例如,假设我有个 <code>list</code>:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Map&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt; env </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> HashMap&lt;</span><span style="color:#F97583;">String</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">Object</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">    ArrayList&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt; list </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> ArrayList&lt;</span><span style="color:#F97583;">Integer</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">    list.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    list.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    list.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    env.</span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;list&quot;</span><span style="color:#E1E4E8;">, list);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Object result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;count(list)&quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// 3</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;reduce(list,+,0)&quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// 33</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;filter(list,seq.gt(9))&quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// [10, 20]</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;include(list,10)&quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;sort(list)&quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">    System.out.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(result);  </span><span style="color:#6A737D;">// [3, 10, 20]</span></span>
<span class="line"><span style="color:#E1E4E8;">    AviatorEvaluator.</span><span style="color:#B392F0;">execute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;map(list,println)&quot;</span><span style="color:#E1E4E8;">, env);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以:</p><ul><li>求长度: <code>count(list)</code></li><li>求和: <code>reduce(list,+,0)</code>, <code>reduce</code>函数接收三个参数,第一个是<code>seq</code>,第二个是聚合的函数,如<code>+</code>等,第三个是聚合的初始值</li><li>过滤: <code>filter(list,seq.gt(9))</code>, 过滤出<code>list</code>中所有大于<code>9</code>的元素并返回集合; <code>seq.gt</code>函数用于生成一个谓词,表示大于某个值</li><li>判断元素在不在集合里: <code>include(list,10)</code></li><li>排序: <code>sort(list)</code></li><li>遍历整个集合: <code>map(list,println)</code>, <code>map</code>接受的第二个函数将作用于集合中的每个元素,这里简单地调用<code>println</code>打印每个元素</li></ul><h3 id="两种运行模式" tabindex="-1"><a class="header-anchor" href="#两种运行模式"><span>两种运行模式</span></a></h3><p>默认 <code>AviatorEvaluator</code> 以执行速度优先:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">setOptimize</span><span style="color:#E1E4E8;">(AviatorEvaluator.EVAL);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>你可以修改为编译速度优先,这样不会做编译优化:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">setOptimize</span><span style="color:#E1E4E8;">(AviatorEvaluator.COMPILE);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="调试信息" tabindex="-1"><a class="header-anchor" href="#调试信息"><span>调试信息</span></a></h3><p>从 2.1.1.版本开始,Aviator允许设置输出每个表达式生成的字节码,只要设置<code>trace</code>为<code>true</code>即可:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">setTrace</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>方便用户做跟踪和调试。默认是输出到标准输出,你可以改变输出指向:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#24292e;color:#e1e4e8;"><pre class="shiki github-dark vp-code"><code><span class="line"><span style="color:#E1E4E8;">AviatorEvaluator.</span><span style="color:#B392F0;">setTraceOutputStream</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> FileOutputStream</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> File</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;aviator.log&quot;</span><span style="color:#E1E4E8;">)));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="语法手册" tabindex="-1"><a class="header-anchor" href="#语法手册"><span>语法手册</span></a></h2><p>下面是 Aviator 详细的语法规则定义。</p><h3 id="数据类型" tabindex="-1"><a class="header-anchor" href="#数据类型"><span>数据类型</span></a></h3><ul><li><code>Number</code>类型: 数字类型,支持四种类型,分别是<code>long,double,java.math.BigInteger(简称 big int)</code>和<code>java.math.BigDecimal(简 称 decimal)</code>,规则如下: <ul><li>任何以大写字母 <code>N</code> 结尾的整数都被认为是 <code>big int</code></li><li>任何以大写字母 <code>M</code> 结尾的数字都被认为是 <code>decimal</code></li><li>其他的任何整数都将被转换为 <code>Long</code></li><li>其他任何浮点数都将被转换为 <code>Double</code></li><li>超过 <code>long</code> 范围的整数字面量都将自动转换为 <code>big int</code> 类型</li></ul></li></ul><p>其中 <code>big int</code> 和 <code>decimal</code> 是 2.3.0 版本开始引入的。数字还支持十六进制(以<code>0x</code>或者<code>0X</code>开头的数字), 以及科学计数法,如<code>1e-3</code>等。 不支持其他进制。</p><ul><li><code>String</code>类型: 字符串类型,单引号或者双引号括起来的文本串,如<code>&#39;hello world&#39;</code>, 变量如果传入的是<code>String</code>或者<code>Character</code>也将转为<code>String</code>类型</li><li><code>Bool</code>类型: 常量<code>true</code>和<code>false</code>,表示真值和假值,与 java 的<code>Boolean.TRUE</code>和<code>Boolean.False</code>对应</li><li><code>Pattern</code>类型: 正则表达式, 以<code>//</code>括起来的字符串,如<code>/\d+/</code>,内部 实现为<code>java.util.Pattern</code></li><li>变量类型: 与 Java 的变量命名规则相同,变量的值由用户传入</li><li><code>nil</code>类型: 常量<code>nil</code>,类似 java 中的<code>null</code>,但是<code>nil</code>比较特殊,<code>nil</code>不仅可以参与<code>==、!=</code>的比较, 也可以参与<code>&gt;、&gt;=、&lt;、&lt;=</code>的比较,Aviator 规定任何类型都大于<code>nil</code>除了<code>nil</code>本身,<code>nil==nil</code>返回<code>true</code>。 用户传入的变量值如果为<code>null</code>,那么也将作为<code>nil</code>处理,<code>nil</code>打印为<code>null</code></li></ul><h3 id="操作符" tabindex="-1"><a class="header-anchor" href="#操作符"><span>操作符</span></a></h3><h4 id="算术运算符" tabindex="-1"><a class="header-anchor" href="#算术运算符"><span>算术运算符</span></a></h4><p>Aviator 支持常见的算术运算符,包括<code>+ - * / %</code>五个二元运算符,和一元运算符<code>-(负)</code>。其中<code>- * / %</code>和一元的<code>-</code>仅能作用于<code>Number</code>类型。<br><code>+</code>不仅能用于<code>Number</code>类型,还可以用于<code>String</code>的相加,或者字符串与其他对象的相加。<br> Aviator 规定,任何类型与<code>String</code>相加,结果为<code>String</code>。</p><h4 id="逻辑运算符" tabindex="-1"><a class="header-anchor" href="#逻辑运算符"><span>逻辑运算符</span></a></h4><p>Avaitor 的支持的逻辑运算符包括,一元否定运算符<code>!</code>,以及逻辑与的<code>&amp;&amp;</code>,逻辑或的<code>||</code>。逻辑运算符的操作数只能为<code>Boolean</code>。<br><code>&amp;&amp;</code>和<code>||</code>都执行短路规则。</p><h4 id="关系运算符" tabindex="-1"><a class="header-anchor" href="#关系运算符"><span>关系运算符</span></a></h4><p>Aviator 支持的关系运算符包括<code>&lt;, &lt;=, &gt;, &gt;=</code>以及<code>==</code>和<code>!=</code> 。<br> 关系运算符可以作用于<code>Number</code>之间、<code>String</code>之间、<code>Pattern</code>之间、<code>Boolean</code>之间、变量之间以及其他类型与<code>nil</code>之间的关系比较, 不同类型除了<code>nil</code>之外不能相互比较。</p><h4 id="位运算符" tabindex="-1"><a class="header-anchor" href="#位运算符"><span>位运算符</span></a></h4><p>Aviator 支持所有的 Java 位运算符,包括<code>&amp;, |, ^, ~, &gt;&gt;, &lt;&lt;, &gt;&gt;&gt;</code>。</p><h4 id="匹配运算符" tabindex="-1"><a class="header-anchor" href="#匹配运算符"><span>匹配运算符</span></a></h4><p>匹配运算符<code>=~</code>用于<code>String</code>和<code>Pattern</code>的匹配,它的左操作数必须为<code>String</code>,右操作数必须为<code>Pattern</code>。 匹配成功后,<code>Pattern</code>的分组将存于变量<code>$num</code>,<code>num</code>为分组索引。</p><h4 id="三元运算符" tabindex="-1"><a class="header-anchor" href="#三元运算符"><span>三元运算符</span></a></h4><p>Aviator 没有提供<code>if else</code>语句,但是提供了三元运算符<code>?:</code>,形式为<code>bool ? exp1: exp2</code>。 其中<code>bool</code>必须为<code>Boolean</code>类型的表达式, 而<code>exp1</code>和<code>exp2</code>可以为任何合法的 Aviator 表达式,并且不要求<code>exp1</code>和<code>exp2</code>返回的结果类型一致。</p><h2 id="内置函数" tabindex="-1"><a class="header-anchor" href="#内置函数"><span>内置函数</span></a></h2><table><thead><tr><th style="text-align:left;">函数名称</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">sysdate()</td><td style="text-align:left;">返回当前日期对象 java.util.Date</td></tr><tr><td style="text-align:left;">rand()</td><td style="text-align:left;">返回一个介于 0-1 的随机数,double 类型</td></tr><tr><td style="text-align:left;">print([out],obj)</td><td style="text-align:left;">打印对象,如果指定 out,向 out 打印, 否则输出到控制台</td></tr><tr><td style="text-align:left;">println([out],obj)</td><td style="text-align:left;">与 print 类似,但是在输出后换行</td></tr><tr><td style="text-align:left;">now()</td><td style="text-align:left;">返回 System.currentTimeMillis</td></tr><tr><td style="text-align:left;">long(v)</td><td style="text-align:left;">将值的类型转为 long</td></tr><tr><td style="text-align:left;">double(v)</td><td style="text-align:left;">将值的类型转为 double</td></tr><tr><td style="text-align:left;">str(v)</td><td style="text-align:left;">将值的类型转为 string</td></tr><tr><td style="text-align:left;">date_to_string(date,format)</td><td style="text-align:left;">将 Date 对象转化化特定格式的字符串,2.1.1 新增</td></tr><tr><td style="text-align:left;">string_to_date(source,format)</td><td style="text-align:left;">将特定格式的字符串转化为 Date 对 象,2.1.1 新增</td></tr><tr><td style="text-align:left;">string.contains(s1,s2)</td><td style="text-align:left;">判断 s1 是否包含 s2,返回 Boolean</td></tr><tr><td style="text-align:left;">string.length(s)</td><td style="text-align:left;">求字符串长度,返回 Long</td></tr><tr><td style="text-align:left;">string.startsWith(s1,s2)</td><td style="text-align:left;">s1 是否以 s2 开始,返回 Boolean</td></tr><tr><td style="text-align:left;">string.endsWith(s1,s2)</td><td style="text-align:left;">s1 是否以 s2 结尾,返回 Boolean</td></tr><tr><td style="text-align:left;">string.substring(s,begin[,end])</td><td style="text-align:left;">截取字符串 s,从 begin 到 end,如果忽略 end 的话,将从 begin 到结尾,与 java.util.String.substring 一样。</td></tr><tr><td style="text-align:left;">string.indexOf(s1,s2)</td><td style="text-align:left;">java 中的 s1.indexOf(s2),求 s2 在 s1 中 的起始索引位置,如果不存在为-1</td></tr><tr><td style="text-align:left;">string.split(target,regex,[limit])</td><td style="text-align:left;">Java 里的 String.split 方法一致,2.1.1 新增函数</td></tr><tr><td style="text-align:left;">string.join(seq,seperator)</td><td style="text-align:left;">将集合 seq 里的元素以 seperator 为间隔 连接起来形成字符串,2.1.1 新增函数</td></tr><tr><td style="text-align:left;">string.replace_first(s,regex,replacement)</td><td style="text-align:left;">Java 里的 String.replaceFirst 方法, 2.1.1 新增</td></tr><tr><td style="text-align:left;">string.replace_all(s,regex,replacement)</td><td style="text-align:left;">Java 里的 String.replaceAll 方法 , 2.1.1 新增</td></tr><tr><td style="text-align:left;">math.abs(d)</td><td style="text-align:left;">求 d 的绝对值</td></tr><tr><td style="text-align:left;">math.sqrt(d)</td><td style="text-align:left;">求 d 的平方根</td></tr><tr><td style="text-align:left;">math.pow(d1,d2)</td><td style="text-align:left;">求 d1 的 d2 次方</td></tr><tr><td style="text-align:left;">math.log(d)</td><td style="text-align:left;">求 d 的自然对数</td></tr><tr><td style="text-align:left;">math.log10(d)</td><td style="text-align:left;">求 d 以 10 为底的对数</td></tr><tr><td style="text-align:left;">math.sin(d)</td><td style="text-align:left;">正弦函数</td></tr><tr><td style="text-align:left;">math.cos(d)</td><td style="text-align:left;">余弦函数</td></tr><tr><td style="text-align:left;">math.tan(d)</td><td style="text-align:left;">正切函数</td></tr><tr><td style="text-align:left;">map(seq,fun)</td><td style="text-align:left;">将函数 fun 作用到集合 seq 每个元素上, 返回新元素组成的集合</td></tr><tr><td style="text-align:left;">filter(seq,predicate)</td><td style="text-align:left;">将谓词 predicate 作用在集合的每个元素 上,返回谓词为 true 的元素组成的集合</td></tr><tr><td style="text-align:left;">count(seq)</td><td style="text-align:left;">返回集合大小</td></tr><tr><td style="text-align:left;">include(seq,element)</td><td style="text-align:left;">判断 element 是否在集合 seq 中,返回 boolean 值</td></tr><tr><td style="text-align:left;">sort(seq)</td><td style="text-align:left;">排序集合,仅对数组和 List 有效,返回排 序后的新集合</td></tr><tr><td style="text-align:left;">reduce(seq,fun,init)</td><td style="text-align:left;">fun 接收两个参数,第一个是集合元素, 第二个是累积的函数,本函数用于将 fun 作用在集合每个元素和初始值上面,返回 最终的 init 值</td></tr><tr><td style="text-align:left;">seq.eq(value)</td><td style="text-align:left;">返回一个谓词,用来判断传入的参数是否跟 value 相等,用于 filter 函数,如filter(seq,seq.eq(3)) 过滤返回等于3 的元素组成的集合</td></tr><tr><td style="text-align:left;">seq.neq(value)</td><td style="text-align:left;">与 seq.eq 类似,返回判断不等于的谓词</td></tr><tr><td style="text-align:left;">seq.gt(value)</td><td style="text-align:left;">返回判断大于 value 的谓词</td></tr><tr><td style="text-align:left;">seq.ge(value)</td><td style="text-align:left;">返回判断大于等于 value 的谓词</td></tr><tr><td style="text-align:left;">seq.lt(value)</td><td style="text-align:left;">返回判断小于 value 的谓词</td></tr><tr><td style="text-align:left;">seq.le(value)</td><td style="text-align:left;">返回判断小于等于 value 的谓词</td></tr><tr><td style="text-align:left;">seq.nil()</td><td style="text-align:left;">返回判断是否为 nil 的谓词</td></tr><tr><td style="text-align:left;">seq.exists()</td><td style="text-align:left;">返回判断不为 nil 的谓词</td></tr></tbody></table><h2 id="相关链接" tabindex="-1"><a class="header-anchor" href="#相关链接"><span>相关链接</span></a></h2><p><a href="https://github.com/killme2008/aviator" target="_blank" rel="noopener noreferrer">GitHub上的资料</a></p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: moyusisi@126.com">moyusisi</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/program/code/2016-02-25-Class%E7%B1%BB%E7%AE%80%E4%BB%8B.html" aria-label="Class类简介"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Class类简介</div></a><a class="route-link auto-link next" href="/program/code/2016-02-16-Type%E8%AF%A6%E8%A7%A3.html" aria-label="Java中的Type详解"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Java中的Type详解<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2024 moyusisi </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BZq5veQF.js" defer></script>
  </body>
</html>
